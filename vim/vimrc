
" Information {{{
"       Author: Alberto Montes
" }}}

" Plugins {{{
        set nocompatible
        filetype off
        set runtimepath+=~/.vim/bundle/Vundle.vim
        set runtimepath+=/usr/local/opt/fzf
        call vundle#begin()

        " Plugin Management:
        Plugin 'VundleVim/Vundle.vim'

        " UI:
        " Airline
        Plugin 'vim-airline/vim-airline'
        Plugin 'vim-airline/vim-airline-themes'
        " Colorschemes
        Plugin 'morhetz/gruvbox'
        Plugin 'ajmwagar/vim-deus'
        " NerdTree with icons and git
        Plugin 'Xuyuanp/nerdtree-git-plugin'
        Plugin 'ryanoasis/vim-devicons'
        Plugin 'scrooloose/nerdtree'
        Plugin 'jistr/vim-nerdtree-tabs'
        " Active pane highlight
        Plugin 'blueyed/vim-diminactive'

        " IDE:
        " Tags
        Plugin 'majutsushi/tagbar'
        " Syntax linter and fix
        Plugin 'w0rp/ale'
        " Fuzzy Finding
        Plugin 'junegunn/fzf.vim'
        " Completion
        if has('nvim')
                Plugin 'roxma/nvim-completion-manager'
        endif
        " Snippets
        if has('python') || has('python3')
                Plugin 'SirVer/ultisnips'
        endif
        Plugin 'honza/vim-snippets'

        " VIM: as programmer editor
        " Defaults
        Plugin 'tpope/vim-sensible'
        " UNIX shell commands
        Plugin 'tpope/vim-eunuch'
        " Comments
        Plugin 'tpope/vim-commentary'
        " Quoting surround
        Plugin 'tpope/vim-surround'
        " Pairs of handy bracket mappings
        Plugin 'tpope/vim-unimpaired'
        " Close buffers
        Plugin 'qpkorr/vim-bufkill'
        " Auto save
        Plugin '907th/vim-auto-save'
        " Highlight yank text
        Plugin 'machakann/vim-highlightedyank'
        " Multiple cursors
        Plugin 'terryma/vim-multiple-cursors'
        " Miscellaneus
        Plugin 'xolox/vim-misc'
        " tmux integration
        Plugin 'tmux-plugins/vim-tmux-focus-events'
        " Closing quotes and parenthesis
        Plugin 'Raimondi/delimitMate'
        " Git integration
        Plugin 'airblade/vim-gitgutter'
        Plugin 'tpope/vim-fugitive'
        " tmux integration
        Plugin 'christoomey/vim-tmux-navigator'

        " Programming Languages:
        " LaTeX
        Plugin 'lervag/vimtex'
        " tmux
        Plugin 'tmux-plugins/vim-tmux'
        " Markdown
        Plugin 'godlygeek/tabular'
        Plugin 'plasticboy/vim-markdown'
        " Web Development
        Plugin 'othree/html5.vim'
        Plugin 'othree/csscomplete.vim'
        Plugin 'roxma/nvim-cm-tern'
        " C/C++
        Plugin 'roxma/ncm-clang'
        " Go
        Plugin 'fatih/vim-go'

        call vundle#end()
" }}}

" General Settings {{{
        filetype plugin indent on
        " UI config
        set t_Co=256
        if v:version >= 800
                set termguicolors
                " let &t_8f = "\<Esc>[38;2;%lu;%lu;%lum"
                " let &t_8b = "\<Esc>[48;2;%lu;%lu;%lum"
        endif
        set background=dark
        colorscheme gruvbox
        " let g:deus_termcolors=256
        syntax on
        set laststatus=2        " Always show statusbar
        " Config number lines
        set number relativenumber
        " Show line number in INSERT mode, and relative line numbers in NORMAL
        " mode
        " augroup numbertoggle
        "         autocmd!
        "         autocmd BufEnter,FocusGained,InsertLeave * set relativenumber
        "         autocmd BufLeave,FocusLost,InsertEnter   * set norelativenumber
        " augroup END

        " Tabulation
        set expandtab

        set formatoptions-=t
        set cursorline
        set wildmenu
        set exrc
        set lazyredraw
        set showmatch
        " Highlight all the columns after 'textwidth'
        let &colorcolumn=join(map(copy(range(1, 256)), '"+" . v:val'), ',')
        set encoding=utf-8
        " search
        set incsearch
        set hlsearch
        if has('nvim')
                set inccommand=split
        endif
        " folding
        set foldenable
        set foldlevelstart=10
        set foldnestmax=10
        set foldmethod=indent
        set conceallevel=2

        set clipboard=unnamed

        set backspace=indent,eol,start
        set ruler
        highlight Comment cterm=italic

        syntax on

        if has('mouse')
                set mouse=a
        endif

        if has('nvim')
                let g:python_host_prog = '/usr/local/bin/python2'
                let g:python3_host_prog = '/usr/local/bin/python3'
        endif

        set secure

" }}}


" Mappings {{{
        let g:mapleader = "\<space>"

        nnoremap <leader><space> :nohlsearch<CR>
        map <C-w> :BD<CR>:redraw<CR>

        " Visual vertical movement for long lines
        nmap j gj
        nmap k gk

        " Keep selected text selected when fixing indentation
        vnoremap < <gv
        vnoremap > >gv

        if has('nvim')
                tnoremap <Esc> <C-\><C-n>
                tnoremap <M-[> <Esc>
                tnoremap <C-v><Esc> <Esc>

                " Terminal mode:
                tnoremap <M-h> <c-\><c-n><c-w>h
                tnoremap <M-j> <c-\><c-n><c-w>j
                tnoremap <M-k> <c-\><c-n><c-w>k
                tnoremap <M-l> <c-\><c-n><c-w>l
                " Insert mode:
                inoremap <M-h> <Esc><c-w>h
                inoremap <M-j> <Esc><c-w>j
                inoremap <M-k> <Esc><c-w>k
                inoremap <M-l> <Esc><c-w>l
                " Visual mode:
                vnoremap <M-h> <Esc><c-w>h
                vnoremap <M-j> <Esc><c-w>j
                vnoremap <M-k> <Esc><c-w>k
                vnoremap <M-l> <Esc><c-w>l
                " Normal mode:
                nnoremap <M-h> <c-w>h
                nnoremap <M-j> <c-w>j
                nnoremap <M-k> <c-w>k
                nnoremap <M-l> <c-w>l
        endif
" }}}
